#include <regex.h>
#include <sys/types.h>
#include <dirent.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>


typedef struct file_stack{

    char* name;
    short type;   // 1 - file, 2 - directory
    struct file_stack* next;

}__attribute__((packed)) FILE_STACK;


FILE_STACK* push(FILE_STACK* top, char* name, short type){

    if(top == NULL){
        FILE_STACK* node = malloc(sizeof(FILE_STACK));

        node->name = malloc(strlen(name) + 1);
        node->name[strlen(name)] = '\0';
        strcpy(node->name, name);
        node->type = type;

        node->next = NULL;    
        return node;
    }

    FILE_STACK* node = malloc(sizeof(FILE_STACK));

    node->name = malloc(strlen(name) + 1);
    node->name[strlen(name)] = '\0';
    strcpy(node->name, name);
    node->type = type;

    node->next = top;
    return node;
}


FILE_STACK* pop(FILE_STACK* top){

    if(top == NULL){
        return NULL;
    }

    FILE_STACK* previous_top = top;

    top = top->next;

    memset(previous_top->name, 0, strlen(previous_top->name));

    free(previous_top->name);

    free(previous_top);

    return top;

}





int main(int argc, char const *argv[])
{
    
    FILE_STACK* top = NULL;
    
    top = push(top, "philip", 1);
    top = push(top, "Sachi", 2);

    printf("top: %s\n", top->name);

    top = pop(top);
    top = pop(top);
    top = pop(top);

    return 0;
}
